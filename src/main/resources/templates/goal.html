<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <link rel="icon" href="/images/favicon.png">
    <meta charset="UTF-8">
    <title>DIVY - ê²½ì œì  ììœ </title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" as="style" crossorigin
          href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/static/pretendard.css" />

    <style>
        body { margin: 0; padding: 0; font-family: "Pretendard", sans-serif;
            background-color: #F2F4F6; color: #333; }
        .navbar { background-color: white; padding: 15px 0;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            position: sticky; top: 0; z-index: 100; }
        .nav-container { max-width: 600px; margin: 0 auto;
            display: flex; justify-content: space-between;
            align-items: center; padding: 0 20px; }
        .nav-brand { font-weight: 800; font-size: 20px;
            color: #3182F6; text-decoration: none; }
        .nav-menu a { text-decoration: none; color: #666;
            font-weight: 600; margin-left: 15px;
            font-size: 14px; transition: color 0.2s; }
        .nav-menu a:hover { color: #3182F6; }
        .container { max-width: 600px; margin: 30px auto; padding: 0 20px; }

        .card { background: white; padding: 30px; border-radius: 24px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.05); margin-bottom: 20px; text-align: center; }

        .input-wrapper { display: flex; align-items: center; justify-content: center; gap: 8px; margin-top: 20px; }
        .input-money {
            width: 120px; padding: 12px; border: 2px solid #E5E8EB; border-radius: 12px;
            font-size: 20px; font-weight: 700; outline: none; transition: 0.2s;
            text-align: center; color: #3182F6;
        }
        .input-money:focus { border-color: #3182F6; }
        .unit-text { font-size: 18px; font-weight: 700; color: #333; }

        .btn-set {
            background-color: #3182F6; color: white; border: none; padding: 14px 20px;
            border-radius: 12px; font-weight: 700; font-size: 16px; cursor: pointer;
            margin-top: 20px; width: 100%; transition: 0.2s;
        }
        .btn-set:hover { background-color: #1B64DA; }

        .progress-container {
            background-color: #E5E8EB; border-radius: 20px; height: 24px;
            margin: 30px 0 10px 0; overflow: hidden; position: relative;
        }
        .progress-bar {
            background: linear-gradient(90deg, #3182F6, #6B9EFF);
            height: 100%; border-radius: 20px; width: 0%;
            transition: width 1.2s ease-out; position: relative;
        }
        .percent-badge { font-size: 48px; font-weight: 800; color: #3182F6; margin-bottom: 5px; }

        .samsung-card {
            background-color: #F9FAFB; border-radius: 16px; padding: 20px;
            margin-top: 25px; border: 1px solid #F2F4F6;
        }
        .samsung-badge {
            background-color: white; border: 1px solid #E5E8EB; padding: 4px 10px;
            border-radius: 20px; font-size: 12px; font-weight: 600; color: #666;
            display: inline-block; margin-bottom: 10px;
        }

        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .animate-up { animation: slideUp 0.5s ease-out; }
    </style>
</head>
<body>

<nav class="navbar">
    <div class="nav-container">
        <a href="/" class="nav-brand" style="display: flex; align-items: center; text-decoration: none;">
            <img src="/images/favicon.png" alt="DIVY" style="height: 33px;">

            <span style="font-size: 25px; font-weight: 300; color: #3182F6;">DIVY</span>
        </a>
        <div class="nav-menu">
            <a href="/calculator">ê³„ì‚°ê¸°</a>
            <a href="/goal" style="color:#3182F6">ë¡œë“œë§µ</a>
            <a href="/calendar">ìº˜ë¦°ë”</a>
        </div>
    </div>
</nav>

<div class="container">
    <div class="card animate-up">
        <h2 style="margin: 0; font-size: 22px;">ğŸ¯ ê²½ì œì  ììœ  ëª©í‘œ ì„¤ì •</h2>
        <p style="color: #6B7684; margin-top: 10px; font-size: 15px;">
            ì›” ì–¼ë§ˆì˜ ë°°ë‹¹ê¸ˆì„ ë°›ê³  ì‹¶ìœ¼ì‹ ê°€ìš”?
        </p>
        <form action="/goal" method="get">
            <div class="input-wrapper">
                <input type="number" name="targetMonthly" class="input-money"
                       th:value="${targetMonthly > 0 ? targetMonthly : ''}"
                       placeholder="300" required>
                <span class="unit-text">ë§Œì›</span>
            </div>
            <button type="submit" class="btn-set">ì„¤ì •í•˜ê¸°</button>
        </form>
    </div>

    <div class="card animate-up" th:if="${targetMonthly > 0}">
        <div style="font-size: 14px; color: #6B7684;">í˜„ì¬ ë‹¬ì„±ë¥ </div>
        <div class="percent-badge" th:text="${progressPercent} + '%'">0%</div>

        <div class="progress-container">
            <div class="progress-bar" id="progressBar" th:style="'width: ' + ${progressPercent} + '%'"></div>
        </div>

        <div style="display: flex; justify-content: space-between; margin-top: 10px; font-size: 14px; color: #666;">
            <span>í˜„ì¬: <b th:text="${#numbers.formatInteger(currentMonthly, 0, 'COMMA')}">0</b>ì›</span>
            <span>ëª©í‘œ: <b th:text="${#numbers.formatInteger(targetMonthly * 10000, 0, 'COMMA')}">3,000,000</b>ì›</span>
        </div>

        <div class="samsung-card" th:if="${gapAmount > 0}">
            <span class="samsung-badge">ğŸ’¡ ëª©í‘œ ë‹¬ì„± ì†”ë£¨ì…˜</span>

            <div style="font-size: 16px; color: #333; margin-bottom: 5px; line-height: 1.5;">
                ì›” <b style="color:#3182F6; font-size: 18px;"
                     th:text="${#numbers.formatInteger(gapMonthly / 10000, 0, 'COMMA')} + 'ë§Œì›'">15ë§Œì›</b>ë§Œ ë” ë§Œë“¤ë©´ ì¡¸ì—…! ğŸ“
            </div>

            <div style="margin-top: 15px; border-top: 1px dashed #E5E8EB; padding-top: 15px;">
                <div style="font-size: 13px; color: #6B7684;">ì‚¼ì„±ì „ì(ìš°)ë¡œ ë‹¬ì„±í•˜ë ¤ë©´?</div>

                <div style="font-size: 24px; font-weight: 800; color: #3182F6; margin-top: 5px;">
                    <span th:text="${#numbers.formatInteger(neededShares, 0, 'COMMA')}">1,000</span>ì£¼
                </div>

                <div style="font-size: 12px; color: #8B95A1; margin-top: 5px;">
                    (íˆ¬ìê¸ˆ ì•½ <span th:text="${#numbers.formatInteger(neededShares * 60000 / 10000, 0, 'COMMA')}">5,000</span>ë§Œì› í•„ìš”)
                </div>
            </div>
        </div>

        <div th:if="${gapAmount <= 0}" style="margin-top: 30px;">
            <div style="font-size: 50px;">ğŸ‰</div>
            <h3 style="color: #3182F6; margin: 10px 0;">ê²½ì œì  ììœ  ë‹¬ì„±!</h3>
            <p style="color: #666; font-size: 14px;">ì¶•í•˜í•©ë‹ˆë‹¤! ëª©í‘œë¥¼ ë‹¬ì„±í•˜ì…¨ìŠµë‹ˆë‹¤.</p>
        </div>

        <div style="margin-top: 15px; font-size: 12px; color: #8B95A1; text-align: center; line-height: 1.5;">
            â€» ìœ„ ê¸ˆì•¡ì€ í˜„ì¬ ë°°ë‹¹ê¸ˆ ê¸°ì¤€ì´ë©°, ê¸°ì—… ì‹¤ì ì— ë”°ë¼ ë³€ë™ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        </div>

    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        const bar = document.getElementById('progressBar');
        if(bar) {
            const targetWidth = bar.style.width;
            bar.style.width = '0%';
            setTimeout(() => { bar.style.width = targetWidth; }, 100);
        }
    });
</script>

</body>
</html>